{% set isPublic=true %} {%set currentView='carousel'%}
<div class="home-heading18">
  <h2 class="home-text24">Nuestras Especialidades</h2>
  <p class="home-text25">
    Nos dedicamos a ofrecerte los mejores servicios en diversas áreas de la
    salud.
  </p>
</div>

<!-- Contenedor de especialidades (ya incluye el contenido) -->
<div
  id="docsContent"
  class="home-docs"
>
  {% include "pages/privatePages/specialty/verb/getAll.njk" %}
</div>
<div class="home-heading19">
  <h2 class="home-header19">¿Por qué elegirnos?</h2>
  <p class="home-header20">
    Estamos comprometidos a brindarte la mejor atención médica posible.
  </p>
</div>
<div class="home-content13">
  <div class="home-video1">
    <video
      src=""
      poster="/News/video-1500w.png"
      class="home-video2"
    ></video>
    <div class="home-play">
      <img
        alt="image"
        src="/Icons/play.svg"
        class="home-image23"
      />
    </div>
  </div>
  <div class="home-caption8">
    <h3 class="home-header21">
      Comprometidos a la excelencia en atención médica
    </h3>
    <p class="home-header22">
      Nuestro objetivo es proporcionar un servicio excepcional a cada paciente.
    </p>
  </div>
</div>
<button
  id="openModalBtn"
  class="add-button"
>
  Ver Especialidades
</button>

<!-- Modal -->
<div
  id="specialtiesModal"
  class="modal"
  style="display: none"
>
  <div class="modal-content">
    <!-- Botón de cierre que se fija en la parte superior -->
    <div
      class="modal-head"
      isEditable="true"
    >
      <h3
        class="modal-title"
        isEditable="true"
      ></h3>
      <span
        class="close-button"
        id="closeButton"
        isEditable="true"
        >×</span
      >
    </div>
    <!-- Cuerpo del modal -->
    <div
      class="content-body"
      id="modalBody"
    ></div>
  </div>
</div>

<script type="module">
  import { fetchSpecialty } from './js/services/loadFetchs.js';
  import { getState } from './js/reducers/state.js';
  import { renderItems } from './js/renders/renderItems.js';
  import { specialtyRenderer } from './js/renders/itemRender.js';
  import { openModal, closeModal } from './js/components/custom/modal.js';

  const headers = ['Nombre', 'Descripción', 'Estado'];
  let currentPage = 1;
  const specialtyPerPage = 6;
  const currentViewModal = 'card';

  const loadSpecialtiesData = async () => {
    try {
      // Cargar las especialidades
      await fetchSpecialty();
      const specialties = getState().specialties;

      // Renderizar las especialidades
      renderItems(
        currentViewModal,
        specialties,
        headers,
        currentPage,
        specialtyPerPage,
        'modalBody', // Aquí se pasaría al body del modal
        specialtyRenderer,
        'true'
      );
    } catch (error) {
      console.error('Error al cargar las especialidades:', error);
    }
  };

  // Botón para abrir el modal
  const openModalBtn = document.getElementById('openModalBtn');
  const closeModalBtn = document.getElementById('closeButton');
  const modal = document.getElementById('specialtiesModal');

  openModalBtn.addEventListener('click', async () => {
    // Cargar las especialidades cuando se haga clic en el botón
    await loadSpecialtiesData();

    // Abrir el modal con el título y el color de fondo deseado
    openModal('specialtiesModal', 'fullscreen', 'Especialidades');
  });

  // Cerrar el modal cuando se haga clic en el botón de cierre
  closeModalBtn.addEventListener('click', () => {
    closeModal('specialtiesModal');
  });

  // Cerrar el modal si se hace clic fuera del contenido del modal
  window.addEventListener('click', (event) => {
    if (event.target === modal) {
      closeModal('specialtiesModal');
    }
  });
</script>
